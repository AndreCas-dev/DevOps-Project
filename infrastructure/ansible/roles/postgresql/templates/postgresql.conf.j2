# PostgreSQL Configuration File
# Managed by Ansible - Do not edit manually

# -----------------------------
# Connection Settings
# -----------------------------
listen_addresses = '{{ postgresql_listen_addresses }}'
port = {{ postgresql_port }}
max_connections = {{ postgresql_max_connections }}

# -----------------------------
# Memory Settings
# -----------------------------
shared_buffers = {{ postgresql_shared_buffers }}
effective_cache_size = {{ postgresql_effective_cache_size }}
work_mem = {{ postgresql_work_mem }}
maintenance_work_mem = {{ postgresql_maintenance_work_mem }}

# -----------------------------
# WAL Settings
# -----------------------------
wal_level = {{ postgresql_wal_level }}
max_wal_senders = {{ postgresql_max_wal_senders }}

# -----------------------------
# Checkpoints
# -----------------------------
checkpoint_completion_target = 0.9
wal_buffers = 16MB
min_wal_size = 1GB
max_wal_size = 4GB

# -----------------------------
# Query Tuning
# -----------------------------
random_page_cost = 1.1
effective_io_concurrency = 200
default_statistics_target = 100

# -----------------------------
# Logging
# -----------------------------
log_destination = '{{ postgresql_log_destination }}'
logging_collector = {{ postgresql_logging_collector }}
log_directory = '{{ postgresql_log_directory }}'
log_filename = '{{ postgresql_log_filename }}'
log_statement = '{{ postgresql_log_statement }}'
log_line_prefix = '%m [%p] %q%u@%d '
log_timezone = 'UTC'

# -----------------------------
# Security
# -----------------------------
ssl = {{ postgresql_ssl }}
password_encryption = {{ postgresql_password_encryption }}

# -----------------------------
# Locale
# -----------------------------
datestyle = 'iso, mdy'
timezone = 'UTC'
lc_messages = 'en_US.UTF-8'
lc_monetary = 'en_US.UTF-8'
lc_numeric = 'en_US.UTF-8'
lc_time = 'en_US.UTF-8'
default_text_search_config = 'pg_catalog.english'

# -----------------------------
# Data Directory
# -----------------------------
data_directory = '{{ postgresql_data_path }}'
hba_file = '{{ postgresql_config_path }}/pg_hba.conf'
ident_file = '{{ postgresql_config_path }}/pg_ident.conf'
