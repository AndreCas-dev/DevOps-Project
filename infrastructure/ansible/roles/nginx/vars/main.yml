---
# Nginx role variables

# Nginx configuration directories
nginx_config_dir: "{{ app_docker_dir | default('/opt/devops-app/docker') }}/nginx"
nginx_conf_d_dir: "{{ nginx_config_dir }}/conf.d"

# Nginx settings
nginx_worker_processes: "auto"
nginx_worker_connections: 1024
nginx_keepalive_timeout: 65

# Gzip settings
nginx_gzip_enabled: true
nginx_gzip_comp_level: 6
nginx_gzip_types:
  - text/plain
  - text/css
  - text/xml
  - application/json
  - application/javascript
  - application/xml

# Proxy settings
nginx_proxy_connect_timeout: "60s"
nginx_proxy_send_timeout: "60s"
nginx_proxy_read_timeout: "60s"

# Security headers
nginx_security_headers:
  X-Frame-Options: "SAMEORIGIN"
  X-Content-Type-Options: "nosniff"
  X-XSS-Protection: "1; mode=block"

# Upstream services
nginx_upstreams:
  - name: app
    server: "app:8000"
    keepalive: 32
  - name: frontend
    server: "frontend:3000"
    keepalive: 32

# SSL settings (for future use)
nginx_ssl_enabled: false
nginx_ssl_certificate: ""
nginx_ssl_certificate_key: ""
nginx_ssl_protocols: "TLSv1.2 TLSv1.3"

# Rate limiting
nginx_rate_limit_enabled: false
nginx_rate_limit_zone: "limit_req_zone $binary_remote_addr zone=api:10m rate=10r/s"
nginx_rate_limit_burst: 20

# Health check
nginx_health_url: "http://localhost:80/nginx-health"
